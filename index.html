<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Password Generator</title>
  <style>
      body {
  font-family: Arial, sans-serif;
  background-color: #f4f4f4;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}

.container {
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  text-align: center;
}

input {
  width: 100%;
  padding: 10px;
  margin: 10px 0;
  border: 1px solid #ccc;
  border-radius: 4px;
}

button {
  padding: 10px 20px;
  margin: 5px;
  border: none;
  background-color: #007bff;
  color: white;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #0056b3;
}

#history {
  margin-top: 20px;
  text-align: left;
}
  </style>
</head>
<body>
  <div class="container">
    <h1>Password Generator</h1>
    <input type="text" id="password" readonly>
    <button onclick="generatePassword()">Generate Password</button>
    <button onclick="savePassword()">Save Password</button>
    <button onclick="showHistory()">Show History</button>
    <div id="history"></div>
  </div>

  <script>
    // Function to generate a random password
    function generatePassword() {
      const length = 12;
      const charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";
      let password = "";
      for (let i = 0; i < length; i++) {
        password += charset.charAt(Math.floor(Math.random() * charset.length));
      }
      document.getElementById("password").value = password;
    }

    // Function to save the password to localStorage and GitHub
    function savePassword() {
      const password = document.getElementById("password").value;
      if (password) {
        // Save password to localStorage
        let savedPasswords = JSON.parse(localStorage.getItem("passwords")) || [];
        savedPasswords.push(password);
        localStorage.setItem("passwords", JSON.stringify(savedPasswords));

        // Save to GitHub (ensure you replace the token and repo details)
        saveToGitHub(password);

        alert("Password saved!");
      } else {
        alert("No password generated!");
      }
    }

    // Function to save the password to GitHub
    async function saveToGitHub(password) {
      const token = "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"; // Replace with your GitHub token
      const repo = "VMC"; // Replace with your repo name
      const path = "passwords.txt";
      const url = `https://api.github.com/repos/ssairam18/${repo}/contents/${path}`;

      const content = btoa(password + "\n"); // Encode to base64

      const response = await fetch(url, {
        method: "PUT",
        headers: {
          Authorization: `token ${token}`,
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          message: "Update passwords.txt",
          content: content,
          sha: "", // Add the SHA of the file if it already exists
        }),
      });

      if (!response.ok) {
        alert("Failed to save to GitHub.");
      }
    }

    // Function to show saved passwords
    function showHistory() {
      const historyDiv = document.getElementById("history");
      historyDiv.innerHTML = "<h2>Saved Passwords</h2>";

      // Get passwords from localStorage
      const savedPasswords = JSON.parse(localStorage.getItem("passwords")) || [];

      if (savedPasswords.length > 0) {
        savedPasswords.forEach((password) => {
          const p = document.createElement("p");
          p.textContent = password;
          historyDiv.appendChild(p);
        });
      } else {
        historyDiv.innerHTML += "<p>No passwords saved yet.</p>";
      }
    }
  </script>
</body>
</html>
